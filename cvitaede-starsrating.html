<dom-module id="cvitaede-starsrating">
  <template>
    <style>
      :host {
        display: block;
        max-width: 500px;
        min-height: 40px;
        font-size: 30px;
        --star-size: 1em;
        --star-color: #FFD700;
      }
      
      :host ::content fieldset,
      :host ::content label {
        margin: 0;
        padding: 0;
      }
      
      :host ::content .rating {
        border: none;
        float: left;
      }
      
      :host ::content .rating>input {
        display: none;
      }
      
      :host ::content .rating>label:before {
        margin: 5px;
        font-size: var(--star-size);
        display: inline-block;
        content: "\2605";
      }
      
      :host ::content .rating>.half:before {
        content: "\f089";
        position: absolute;
      }
      
      :host ::content .rating>label {
        color: var(--star-color);
        float: left;
      }
      
      :host ::content .rating>input[checked]~label {
        color: var(--star-color);  
        opacity: 0.3;
      }
    </style>

    <fieldset class="rating">
      <template is="dom-repeat" items="{{_stars}}">
        <input type="radio" id="star{{index}}" name="rating" value="{{index}}" disabled />
        <label class="full" for="star{{index}}"></label>
      </template>

    </fieldset>
  </template>

  <script>
  Polymer({

    is: 'cvitaede-starsrating',

    properties: {
      _stars: {
        type: Array
      },
      numStars: {
        type: Number,
        value: 7
      },
      starSize: {
        type: String,
        value: "3em"
      },
      rating: {
        type: Number,
        value: 3
      }
    },
    ready: function() {
      this._stars = new Array(this.numStars);
      for(var i=0; i<this._stars.length; i++) {
        this._stars[i] = this.numStars - i;
      }
    },
    attached: function() {
      if (this.querySelector('#star' + this.rating)) {
        this.querySelector('#star' + this.rating).setAttribute('checked', 'checked');
        this.customStyle['--star-size'] = this.starSize;
      }
    },
    _computeIndex: function(index) {
      return this.numStars - index;
    }
  });

  </script>
</dom-module>
